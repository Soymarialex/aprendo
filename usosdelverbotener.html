<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprende Espa√±ol con Juegos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
        }
        /* Estilos para el efecto de giro de la tarjeta */
        .card-container {
            perspective: 1000px;
            width: 100%;
            height: 250px;
        }
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .card-face-front {
            background-color: #fff;
        }
        .card-face-back {
            background-color: #93c5fd;
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div id="app" class="flex flex-col items-center justify-center min-h-screen">
        <!-- Contenedor para el t√≠tulo y el bot√≥n de regreso -->
        <div class="flex items-center justify-between w-full max-w-xl mb-6">
            <button id="back-button" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-full shadow-md hover:bg-gray-300 transition-all active:scale-95 hidden">
                ‚Üê Regresar
            </button>
            <h1 class="text-3xl sm:text-4xl font-bold text-center flex-grow">Yo tengo</h1>
            <!-- Espaciador para centrar el t√≠tulo -->
            <div class="w-24"></div>
        </div>

        <!-- Vista del men√∫ principal -->
        <div id="main-menu" class="flex flex-col items-center space-y-4 w-full max-w-xl">
            <h2 class="text-xl sm:text-2xl text-center mb-4">Choose an activity</h2>
            <button class="menu-button bg-blue-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:bg-blue-600 transition-all w-full active:scale-95">
                Flashcards
            </button>
            <button class="menu-button bg-purple-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:bg-purple-600 transition-all w-full active:scale-95">
                Matching Game
            </button>
            <button class="menu-button bg-green-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:bg-green-600 transition-all w-full active:scale-95">
                Complete the Phrase
            </button>
        </div>

        <!-- Vista de las tarjetas giratorias -->
        <div id="flashcards-view" class="view hidden w-full max-w-xl">
            <div class="card-container mb-6">
                <div id="flashcard-card" class="card">
                    <div id="flashcard-front" class="card-face card-face-front">
                        <div class="text-4xl text-center flex flex-col items-center">
                            <span id="flashcard-emoji-front" class="text-6xl mb-2"></span>
                            <span id="flashcard-text-front" class="font-bold"></span>
                        </div>
                    </div>
                    <div id="flashcard-back" class="card-face card-face-back">
                        <div class="text-4xl text-center flex flex-col items-center">
                            <span id="flashcard-emoji-back" class="text-6xl mb-2"></span>
                            <span id="flashcard-text-back" class="font-bold text-white"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-between w-full">
                <button id="prev-card" class="bg-gray-400 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-gray-500 transition-all active:scale-95">Anterior</button>
                <button id="next-card" class="bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 transition-all active:scale-95">Siguiente</button>
            </div>
        </div>

        <!-- Vista del juego de emparejar -->
        <div id="matching-view" class="view hidden w-full max-w-2xl">
            <h2 id="matching-title" class="text-2xl font-bold text-center mb-6">¬°Encuentra la pareja! (Parte 1 de 2)</h2>
            <div id="matching-grid" class="flex justify-center gap-4 w-full">
                <div id="spanish-column" class="flex flex-col gap-4 w-1/2"></div>
                <div id="english-column" class="flex flex-col gap-4 w-1/2"></div>
            </div>
            <p id="matching-message" class="text-center font-bold mt-4"></p>
            <button id="matching-next-part" class="bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition-all active:scale-95 mt-4 hidden">
                Siguiente Parte
            </button>
        </div>

        <!-- Vista del juego de completar -->
        <div id="completion-view" class="view hidden w-full max-w-xl">
            <h2 class="text-2xl font-bold text-center mb-6">Completa la frase</h2>
            <div id="completion-game" class="flex flex-col items-center space-y-4">
                <p id="completion-question" class="text-2xl text-center font-bold"></p>
                <input id="completion-input" type="text" class="w-full max-w-md p-3 text-center text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Escribe tu respuesta...">
                <button id="completion-check" class="bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 transition-all active:scale-95">
                    Verificar
                </button>
                <p id="completion-message" class="text-center font-bold mt-4"></p>
                <button id="completion-next" class="bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition-all active:scale-95 hidden">
                    Siguiente
                </button>
            </div>
        </div>

        <!-- Contenedor para mensajes pop-up (reemplaza alert) -->
        <div id="message-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white p-8 rounded-lg shadow-xl text-center max-w-sm">
                <p id="modal-message" class="text-2xl font-bold mb-4"></p>
                <button id="modal-close" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-all active:scale-95">Cerrar</button>
            </div>
        </div>

    </div>

    <script>
        const phrases = [
            { es: 'Tengo hambre.', en: 'I am hungry.', emoji: 'üòã' },
            { es: 'Tengo sed.', en: 'I am thirsty.', emoji: 'üíß' },
            { es: 'Tengo sue√±o.', en: 'I am sleepy.', emoji: 'üò¥' },
            { es: 'Tengo prisa.', en: 'I am in a hurry.', emoji: 'üèÉ‚Äç‚ôÇÔ∏è' },
            { es: 'Tengo fr√≠o.', en: 'I am cold.', emoji: 'ü•∂' },
            { es: 'Tengo calor.', en: 'I am hot.', emoji: 'ü•µ' },
            { es: 'Tengo miedo.', en: 'I am scared.', emoji: 'üò®' },
            { es: 'Tengo 6 a√±os.', en: 'I am 6 years old.', emoji: 'üéÇ' },
        ];

        // --- Selectores de la UI ---
        const views = document.querySelectorAll('.view');
        const mainMenu = document.getElementById('main-menu');
        const backButton = document.getElementById('back-button');
        const menuButtons = document.querySelectorAll('.menu-button');

        // Tarjetas Giratorias
        const flashcardView = document.getElementById('flashcards-view');
        const flashcardCard = document.getElementById('flashcard-card');
        const flashcardFrontEmoji = document.getElementById('flashcard-emoji-front');
        const flashcardFrontText = document.getElementById('flashcard-text-front');
        const flashcardBackEmoji = document.getElementById('flashcard-emoji-back');
        const flashcardBackText = document.getElementById('flashcard-text-back');
        const prevCardButton = document.getElementById('prev-card');
        const nextCardButton = document.getElementById('next-card');

        // Emparejar
        const matchingView = document.getElementById('matching-view');
        const matchingTitle = document.getElementById('matching-title');
        const spanishColumn = document.getElementById('spanish-column');
        const englishColumn = document.getElementById('english-column');
        const matchingMessage = document.getElementById('matching-message');
        const matchingNextPartButton = document.getElementById('matching-next-part');

        // Completar
        const completionView = document.getElementById('completion-view');
        const completionQuestion = document.getElementById('completion-question');
        const completionInput = document.getElementById('completion-input');
        const completionCheckButton = document.getElementById('completion-check');
        const completionNextButton = document.getElementById('completion-next');
        const completionMessage = document.getElementById('completion-message');

        // Modal de mensajes
        const messageModal = document.getElementById('message-modal');
        const modalMessage = document.getElementById('modal-message');
        const modalCloseButton = document.getElementById('modal-close');

        // --- Estado de la aplicaci√≥n ---
        let currentViewId = 'main-menu';
        let flashcardIndex = 0;
        let selectedMatchingCards = [];
        let matchingPairsFound = 0;
        let currentCompletionPhrase = null;
        let currentMatchingPart = 1;
        let completionPhrasesOrder = [];
        let completionPhraseIndex = 0;


        // --- Funciones de la aplicaci√≥n ---

        // Funci√≥n para mostrar un mensaje en el modal
        function showMessage(message) {
            modalMessage.textContent = message;
            messageModal.classList.remove('hidden');
        }

        // Funci√≥n para cambiar de vista
        function setView(viewId) {
            currentViewId = viewId;
            views.forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(viewId).classList.remove('hidden');
            backButton.classList.toggle('hidden', viewId === 'main-menu');
        }

        // --- L√≥gica de Tarjetas Giratorias ---
        function renderFlashcard() {
            const cardData = phrases[flashcardIndex];
            flashcardFrontEmoji.textContent = cardData.emoji;
            flashcardFrontText.textContent = cardData.es;
            flashcardBackEmoji.textContent = cardData.emoji;
            flashcardBackText.textContent = cardData.en;
            flashcardCard.classList.remove('is-flipped');
        }

        function setupFlashcards() {
            flashcardIndex = 0;
            renderFlashcard();
            setView('flashcards-view');
        }

        function flipCard() {
            flashcardCard.classList.toggle('is-flipped');
        }

        // --- L√≥gica de Emparejar ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createMatchingCard(text, value, isEnglish = false) {
            const card = document.createElement('div');
            card.className = `matching-card bg-white p-4 text-center text-xl font-bold rounded-xl shadow-md cursor-pointer hover:bg-blue-100 transition-all active:scale-95 border-b-4 border-blue-500`;
            card.textContent = text;
            card.dataset.value = value;
            card.dataset.lang = isEnglish ? 'en' : 'es';
            return card;
        }

        function setupMatchingGame(part = 1) {
            currentMatchingPart = part;
            spanishColumn.innerHTML = '';
            englishColumn.innerHTML = '';
            selectedMatchingCards = [];
            matchingPairsFound = 0;
            matchingMessage.textContent = '';
            matchingNextPartButton.classList.add('hidden');

            matchingTitle.textContent = `¬°Encuentra la pareja! (Parte ${currentMatchingPart} de 2)`;

            const subsetPhrases = currentMatchingPart === 1 ? phrases.slice(0, 4) : phrases.slice(4);

            const spanishCards = shuffle(subsetPhrases.map(p => ({ text: p.es + ' ' + p.emoji, value: p.es })));
            const englishCards = shuffle(subsetPhrases.map(p => ({ text: p.en, value: p.es })));

            spanishCards.forEach(item => {
                spanishColumn.appendChild(createMatchingCard(item.text, item.value));
            });
            englishCards.forEach(item => {
                englishColumn.appendChild(createMatchingCard(item.text, item.value, true));
            });

            matchingView.removeEventListener('click', handleMatchingClick);
            matchingView.addEventListener('click', handleMatchingClick);
            setView('matching-view');
        }

        function handleMatchingClick(event) {
            const clickedCard = event.target.closest('.matching-card');
            if (!clickedCard || clickedCard.classList.contains('matched') || selectedMatchingCards.length >= 2) {
                return;
            }

            clickedCard.classList.add('scale-105', 'ring-2', 'ring-blue-500');
            selectedMatchingCards.push(clickedCard);

            if (selectedMatchingCards.length === 2) {
                const [card1, card2] = selectedMatchingCards;
                const isMatch = card1.dataset.value === card2.dataset.value && card1.dataset.lang !== card2.dataset.lang;

                if (isMatch) {
                    matchingMessage.textContent = '¬°Correcto!';
                    card1.classList.add('bg-green-200', 'border-green-500', 'matched');
                    card2.classList.add('bg-green-200', 'border-green-500', 'matched');
                    card1.classList.remove('scale-105', 'ring-2', 'ring-blue-500');
                    card2.classList.remove('scale-105', 'ring-2', 'ring-blue-500');
                    matchingPairsFound++;
                    selectedMatchingCards = [];

                    if (matchingPairsFound === 4) {
                        setTimeout(() => {
                            if (currentMatchingPart === 1) {
                                matchingMessage.textContent = '¬°Muy bien! ¬°Vamos a la segunda parte!';
                                matchingNextPartButton.classList.remove('hidden');
                            } else {
                                showMessage('¬°Felicidades, terminaste todo el juego!');
                            }
                        }, 500);
                    }
                } else {
                    matchingMessage.textContent = 'Int√©ntalo de nuevo.';
                    setTimeout(() => {
                        card1.classList.remove('scale-105', 'ring-2', 'ring-blue-500');
                        card2.classList.remove('scale-105', 'ring-2', 'ring-blue-500');
                        selectedMatchingCards = [];
                    }, 1000);
                }
            }
        }

        // --- L√≥gica de Completar ---
        function showNextCompletionPhrase() {
            if (completionPhraseIndex < completionPhrasesOrder.length) {
                currentCompletionPhrase = completionPhrasesOrder[completionPhraseIndex];
                completionQuestion.textContent = `${currentCompletionPhrase.en}`;
                completionMessage.textContent = '';
                completionInput.value = '';
                completionCheckButton.classList.remove('hidden');
                completionNextButton.classList.add('hidden');
            } else {
                showMessage('¬°Felicidades, has completado todas las frases!');
                completionQuestion.textContent = '¬°Juego terminado!';
                completionInput.classList.add('hidden');
                completionCheckButton.classList.add('hidden');
                completionNextButton.classList.add('hidden');
            }
        }

        function setupCompletionGame() {
            completionPhrasesOrder = shuffle([...phrases]);
            completionPhraseIndex = 0;
            completionInput.classList.remove('hidden');
            showNextCompletionPhrase();
            setView('completion-view');
        }

        function checkCompletion() {
            const inputAnswer = completionInput.value.trim().toLowerCase().replace(/[.?!]/g, '');
            const correctAnswer = currentCompletionPhrase.es.toLowerCase().replace(/[.?!]/g, '');

            if (inputAnswer === correctAnswer) {
                completionMessage.textContent = '¬°Correcto!';
                completionMessage.className = 'text-center font-bold text-green-600 mt-4';
                completionCheckButton.classList.add('hidden');
                completionNextButton.classList.remove('hidden');
                completionPhraseIndex++;
            } else {
                completionMessage.textContent = 'Respuesta incorrecta. Int√©ntalo de nuevo.';
                completionMessage.className = 'text-center font-bold text-red-600 mt-4';
            }
        }

        // --- Event Listeners ---
        menuButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const text = e.target.textContent.trim();
                if (text === 'Flashcards') {
                    setupFlashcards();
                } else if (text === 'Matching Game') {
                    setupMatchingGame(1);
                } else if (text === 'Complete the Phrase') {
                    setupCompletionGame();
                }
            });
        });

        backButton.addEventListener('click', () => {
            setView('main-menu');
        });

        // Eventos para el juego de tarjetas
        flashcardCard.addEventListener('click', flipCard);
        prevCardButton.addEventListener('click', () => {
            flashcardIndex = (flashcardIndex - 1 + phrases.length) % phrases.length;
            renderFlashcard();
        });
        nextCardButton.addEventListener('click', () => {
            flashcardIndex = (flashcardIndex + 1) % phrases.length;
            renderFlashcard();
        });

        // Eventos para el juego de emparejar
        matchingNextPartButton.addEventListener('click', () => {
            setupMatchingGame(2);
        });

        // Eventos para el juego de completar
        completionCheckButton.addEventListener('click', checkCompletion);
        completionNextButton.addEventListener('click', showNextCompletionPhrase);
        completionInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkCompletion();
            }
        });

        // Evento para el modal
        modalCloseButton.addEventListener('click', () => {
            messageModal.classList.add('hidden');
        });

    </script>
</body>
</html>
