<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprendizaje de Espa√±ol</title>
    <link rel="stylesheet" href="style.css?v=1.0">
    <style>
        :root {
            --flamingo-pink: #FF79AC;
            --eerie-black: #121118;
            --white: #FFFFFF;
        }

        body {
            margin: 0;
            font-family: 'Platform Medium', sans-serif;
            background-color: var(--white);
            color: var(--eerie-black);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 800px;
            text-align: center;
            position: relative;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            text-align: justify;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .btn {
            background-color: var(--white);
            border: 2px solid var(--flamingo-pink);
            color: var(--eerie-black);
            padding: 15px 25px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            user-select: none;
        }

        .btn:active, .btn.selected {
            background-color: var(--flamingo-pink);
            color: var(--white);
        }

        .nav-arrow {
            position: fixed;
            bottom: 30px;
            right: 30px;
            font-size: 3rem;
            color: var(--flamingo-pink);
            cursor: pointer;
            transition: transform 0.2s;
            border: none;
            background: none;
        }

        .nav-arrow:hover {
            transform: translateX(10px);
        }

        /* Parte 4 Styles */
        .equation {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
            font-size: 2.5rem; /* Emojis m√°s grandes */
        }

        .word-btn {
            background-color: var(--white);
            border: 3px solid var(--eerie-black);
            font-weight: bold;
        }

        .emoji-img {
            width: 80px; /* Tama√±o aumentado */
            height: 80px;
            object-fit: contain;
        }

        /* Juego Matching */
        .match-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 20px;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .match-item {
            padding: 15px;
            border: 2px solid var(--flamingo-pink);
            cursor: pointer;
            text-align: center;
            font-size: 2.5rem; /* Emojis y texto m√°s grandes */
            border-radius: 10px;
            transition: all 0.2s;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .match-item.word {
            font-size: 1.5rem;
        }

        .match-item.correct {
            background-color: #90EE90 !important;
            border-color: #2E8B57;
            color: var(--eerie-black);
        }

        .match-item.incorrect {
            background-color: #FFB6C1 !important;
            border-color: #FF0000;
        }

        .match-item.selected-active {
            background-color: var(--flamingo-pink);
            color: white;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- Parte 1 -->
    <div id="part1" class="section active">
        <div class="grid">
            <button class="btn" onclick="speak('A')">A = a</button>
            <button class="btn" onclick="speak('E')">E = e</button>
            <button class="btn" onclick="speak('I')">I = i</button>
            <button class="btn" onclick="speak('O')">O = o</button>
            <button class="btn" onclick="speak('U')">U = u</button>
        </div>
    </div>

    <!-- Parte 2 -->
    <div id="part2" class="section">
        <div class="grid">
            <button class="btn" onclick="toggleColor(this)">M = m</button>
            <button class="btn" onclick="toggleColor(this)">N = n</button>
            <button class="btn" onclick="toggleColor(this)">L = l</button>
            <button class="btn" onclick="toggleColor(this)">S = s</button>
            <button class="btn" onclick="toggleColor(this)">C = c</button>
        </div>
    </div>

    <!-- Parte 3 -->
    <div id="part3" class="section">
        <div class="grid">
            <button class="btn" onclick="toggleColor(this)">MA ma</button>
            <button class="btn" onclick="toggleColor(this)">ME me</button>
            <button class="btn" onclick="toggleColor(this)">MI mi</button>
            <button class="btn" onclick="toggleColor(this)">MO mo</button>
            <button class="btn" onclick="toggleColor(this)">MU mu</button>
            <button class="btn" onclick="toggleColor(this)">NA na</button>
            <button class="btn" onclick="toggleColor(this)">NE ne</button>
            <button class="btn" onclick="toggleColor(this)">NI ni</button>
            <button class="btn" onclick="toggleColor(this)">NO no</button>
            <button class="btn" onclick="toggleColor(this)">NU nu</button>
            <button class="btn" onclick="toggleColor(this)">LA la</button>
            <button class="btn" onclick="toggleColor(this)">LE le</button>
            <button class="btn" onclick="toggleColor(this)">LI li</button>
            <button class="btn" onclick="toggleColor(this)">LO lo</button>
            <button class="btn" onclick="toggleColor(this)">LU lu</button>
            <button class="btn" onclick="toggleColor(this)">SA sa</button>
            <button class="btn" onclick="toggleColor(this)">SE se</button>
            <button class="btn" onclick="toggleColor(this)">SI si</button>
            <button class="btn" onclick="toggleColor(this)">SO so</button>
            <button class="btn" onclick="toggleColor(this)">SU su</button>
            <button class="btn" onclick="toggleColor(this)">CA ca</button>
            <button class="btn" onclick="toggleColor(this)">CE ce</button>
            <button class="btn" onclick="toggleColor(this)">CI ci</button>
            <button class="btn" onclick="toggleColor(this)">CO co</button>
            <button class="btn" onclick="toggleColor(this)">CU cu</button>
        </div>
    </div>

    <!-- Parte 4 -->
    <div id="part4" class="section">
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button> + <button class="btn" onclick="toggleColor(this)">a</button> + <button class="btn" onclick="toggleColor(this)">n</button> + <button class="btn" onclick="toggleColor(this)">o</button> = <button class="btn word-btn" onclick="speak('mano')">mano</button> üñêÔ∏è
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button> + <button class="btn" onclick="toggleColor(this)">e</button> + <button class="btn" onclick="toggleColor(this)">s</button> + <button class="btn" onclick="toggleColor(this)">a</button> = <button class="btn word-btn" onclick="speak('mesa')">mesa</button> <img src="https://i.imgur.com/ipnAsRk.png" class="emoji-img" alt="mesa">
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button> + <button class="btn" onclick="toggleColor(this)">o</button> + <button class="btn" onclick="toggleColor(this)">n</button> + <button class="btn" onclick="toggleColor(this)">o</button> = <button class="btn word-btn" onclick="speak('mono')">mono</button> üêí
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button> + <button class="btn" onclick="toggleColor(this)">i</button> + <button class="btn" onclick="toggleColor(this)">e</button> + <button class="btn" onclick="toggleColor(this)">l</button> = <button class="btn word-btn" onclick="speak('miel')">miel</button> üçØ
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button> + <button class="btn" onclick="toggleColor(this)">√∫</button> + <button class="btn" onclick="toggleColor(this)">s</button> + <button class="btn" onclick="toggleColor(this)">i</button> + <button class="btn" onclick="toggleColor(this)">c</button> + <button class="btn" onclick="toggleColor(this)">a</button> = <button class="btn word-btn" onclick="speak('m√∫sica')">m√∫sica</button> üéµ
        </div>
    </div>

    <!-- Parte 5 -->
    <div id="part5" class="section">
        <div class="match-container">
            <div class="column" id="emoji-column"></div>
            <div class="column" id="word-column"></div>
        </div>
    </div>

    <button class="nav-arrow" onclick="nextSection()" id="nextBtn">‚ûú</button>
</div>

<script>
    let currentPart = 1;
    const totalParts = 5;

    function speak(text) {
        const ut = new SpeechSynthesisUtterance(text);
        ut.lang = 'es-ES';
        window.speechSynthesis.speak(ut);
    }

    function toggleColor(btn) {
        btn.classList.toggle('selected');
    }

    function nextSection() {
        if (currentPart < totalParts) {
            document.getElementById(`part${currentPart}`).classList.remove('active');
            currentPart++;
            document.getElementById(`part${currentPart}`).classList.add('active');
        }
        if (currentPart === totalParts) {
            document.getElementById('nextBtn').style.display = 'none';
            initGame();
        }
    }

    const gameData = [
        { word: 'mano', emoji: 'üñêÔ∏è', isImg: false },
        { word: 'mesa', emoji: 'https://i.imgur.com/ipnAsRk.png', isImg: true },
        { word: 'mono', emoji: 'üêí', isImg: false },
        { word: 'miel', emoji: 'üçØ', isImg: false },
        { word: 'm√∫sica', emoji: 'üéµ', isImg: false }
    ];

    let selectedItems = [];

    function initGame() {
        const emojiCol = document.getElementById('emoji-column');
        const wordCol = document.getElementById('word-column');
        emojiCol.innerHTML = '';
        wordCol.innerHTML = '';
        
        const emojis = gameData.map(d => ({ val: d.emoji, id: d.word, type: 'emoji', isImg: d.isImg }));
        const words = gameData.map(d => ({ val: d.word, id: d.word, type: 'word', isImg: false }));

        // Mezclar individualmente
        emojis.sort(() => Math.random() - 0.5);
        words.sort(() => Math.random() - 0.5);

        emojis.forEach(item => {
            const div = document.createElement('div');
            div.className = 'match-item';
            if(item.isImg) {
                div.innerHTML = `<img src="${item.val}" class="emoji-img">`;
            } else {
                div.innerText = item.val;
            }
            div.onclick = () => handleMatch(div, item);
            emojiCol.appendChild(div);
        });

        words.forEach(item => {
            const div = document.createElement('div');
            div.className = 'match-item word';
            div.innerText = item.val;
            div.onclick = () => handleMatch(div, item);
            wordCol.appendChild(div);
        });
    }

    function handleMatch(el, item) {
        if (el.classList.contains('correct') || selectedItems.some(s => s.el === el)) return;

        // Limpiar selecci√≥n previa del mismo tipo
        selectedItems = selectedItems.filter(s => {
            if(s.item.type === item.type) {
                s.el.classList.remove('selected-active');
                return false;
            }
            return true;
        });

        el.classList.add('selected-active');
        selectedItems.push({ el, item });

        if (selectedItems.length === 2) {
            const [first, second] = selectedItems;
            
            if (first.item.id === second.item.id) {
                // Correcto
                first.el.classList.remove('selected-active');
                second.el.classList.remove('selected-active');
                first.el.classList.add('correct');
                second.el.classList.add('correct');
                speak(first.item.id);
                selectedItems = [];
            } else {
                // Incorrecto
                first.el.classList.add('incorrect');
                second.el.classList.add('incorrect');
                setTimeout(() => {
                    first.el.classList.remove('incorrect', 'selected-active');
                    second.el.classList.remove('incorrect', 'selected-active');
                    selectedItems = [];
                }, 500);
            }
        }
    }
</script>

</body>
</html>