<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprendizaje de Espa√±ol</title>
    <link rel="stylesheet" href="style.css?v=1.3">
    <style>
        /* Importamos una fuente que garantiza la 'a' escolar de un solo piso */
        @import url('https://fonts.googleapis.com/css2?family=Andika&display=swap');

        :root {
            --flamingo-pink: #FF79AC;
            --eerie-black: #121118;
            --white: #FFFFFF;
        }

        body {
            margin: 0;
            /* Forzamos Andika en todo el documento para la 'a' escolar */
            font-family: 'Andika', sans-serif;
            background-color: var(--white);
            color: var(--eerie-black);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            /* Caracter√≠stica de fuente para asegurar la 'a' de un piso si la fuente lo soporta */
            font-variant-ligatures: none;
        }

        .container {
            width: 95%;
            max-width: 800px;
            text-align: center;
            position: relative;
            padding: 20px 10px;
            box-sizing: border-box;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .btn {
            background-color: var(--white);
            border: 2px solid var(--flamingo-pink);
            color: var(--eerie-black);
            padding: 12px 20px;
            font-size: 1.4rem; /* Aumentado ligeramente para legibilidad */
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            user-select: none;
            touch-action: manipulation;
            font-family: 'Andika', sans-serif;
        }

        .btn:active, .btn.selected {
            background-color: var(--flamingo-pink);
            color: var(--white);
        }

        .nav-arrow {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: var(--flamingo-pink);
            cursor: pointer;
            transition: transform 0.2s;
            border: none;
            background: none;
            z-index: 100;
        }

        /* Parte 4 Styles - Optimizaci√≥n M√≥vil Extrema */
        .equation {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap; 
            margin: 20px 0;
            gap: 5px;
            font-size: 1.5rem;
            text-align: center;
        }

        .equation span {
            display: inline-block;
            margin: 0 2px;
        }

        .word-btn {
            background-color: var(--white);
            border: 3px solid var(--eerie-black);
            font-weight: bold;
            padding: 8px 12px;
            font-size: 1.4rem;
        }

        .emoji-img {
            width: 55px;
            height: 55px;
            object-fit: contain;
            vertical-align: middle;
        }

        /* Juego Matching */
        .match-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .match-item {
            padding: 10px;
            border: 2px solid var(--flamingo-pink);
            cursor: pointer;
            text-align: center;
            font-size: 2.2rem;
            border-radius: 10px;
            transition: all 0.2s;
            min-height: 75px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            background-color: var(--white);
            font-family: 'Andika', sans-serif;
        }

        .match-item.word {
            font-size: 1.4rem;
        }

        .match-item.correct {
            background-color: #90EE90 !important;
            border-color: #2E8B57;
            color: var(--eerie-black);
        }

        .match-item.incorrect {
            background-color: #FFB6C1 !important;
            border-color: #FF0000;
        }

        .match-item.selected-active {
            background-color: var(--flamingo-pink);
            color: white;
        }

        /* Media Queries para m√≥viles */
        @media (max-width: 480px) {
            .btn { font-size: 1.1rem; padding: 10px 14px; }
            .equation { font-size: 1.2rem; gap: 3px; }
            .word-btn { font-size: 1.2rem; padding: 6px 10px; }
            .emoji-img { width: 45px; height: 45px; }
            .match-item { font-size: 1.8rem; min-height: 65px; }
            .match-item.word { font-size: 1.1rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- Parte 1 -->
    <div id="part1" class="section active">
        <div class="grid">
            <button class="btn" onclick="speak('A')">A = a</button>
            <button class="btn" onclick="speak('E')">E = e</button>
            <button class="btn" onclick="speak('I')">I = i</button>
            <button class="btn" onclick="speak('O')">O = o</button>
            <button class="btn" onclick="speak('U')">U = u</button>
        </div>
    </div>

    <!-- Parte 2 -->
    <div id="part2" class="section">
        <div class="grid">
            <button class="btn" onclick="toggleColor(this)">M = m</button>
            <button class="btn" onclick="toggleColor(this)">N = n</button>
            <button class="btn" onclick="toggleColor(this)">L = l</button>
            <button class="btn" onclick="toggleColor(this)">S = s</button>
            <button class="btn" onclick="toggleColor(this)">C = c</button>
        </div>
    </div>

    <!-- Parte 3 -->
    <div id="part3" class="section">
        <div class="grid">
            <button class="btn" onclick="toggleColor(this)">ma</button>
            <button class="btn" onclick="toggleColor(this)">me</button>
            <button class="btn" onclick="toggleColor(this)">mi</button>
            <button class="btn" onclick="toggleColor(this)">mo</button>
            <button class="btn" onclick="toggleColor(this)">mu</button>
            <button class="btn" onclick="toggleColor(this)">na</button>
            <button class="btn" onclick="toggleColor(this)">ne</button>
            <button class="btn" onclick="toggleColor(this)">ni</button>
            <button class="btn" onclick="toggleColor(this)">no</button>
            <button class="btn" onclick="toggleColor(this)">nu</button>
            <button class="btn" onclick="toggleColor(this)">la</button>
            <button class="btn" onclick="toggleColor(this)">le</button>
            <button class="btn" onclick="toggleColor(this)">li</button>
            <button class="btn" onclick="toggleColor(this)">lo</button>
            <button class="btn" onclick="toggleColor(this)">lu</button>
            <button class="btn" onclick="toggleColor(this)">sa</button>
            <button class="btn" onclick="toggleColor(this)">se</button>
            <button class="btn" onclick="toggleColor(this)">si</button>
            <button class="btn" onclick="toggleColor(this)">so</button>
            <button class="btn" onclick="toggleColor(this)">su</button>
            <button class="btn" onclick="toggleColor(this)">ca</button>
            <button class="btn" onclick="toggleColor(this)">ce</button>
            <button class="btn" onclick="toggleColor(this)">ci</button>
            <button class="btn" onclick="toggleColor(this)">co</button>
            <button class="btn" onclick="toggleColor(this)">cu</button>
        </div>
    </div>

    <!-- Parte 4 -->
    <div id="part4" class="section">
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button><span>+</span><button class="btn" onclick="toggleColor(this)">a</button><span>+</span><button class="btn" onclick="toggleColor(this)">n</button><span>+</span><button class="btn" onclick="toggleColor(this)">o</button><span>=</span><button class="btn word-btn" onclick="speak('mano')">mano</button><span>üñêÔ∏è</span>
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button><span>+</span><button class="btn" onclick="toggleColor(this)">e</button><span>+</span><button class="btn" onclick="toggleColor(this)">s</button><span>+</span><button class="btn" onclick="toggleColor(this)">a</button><span>=</span><button class="btn word-btn" onclick="speak('mesa')">mesa</button><img src="https://i.imgur.com/ipnAsRk.png" class="emoji-img" alt="mesa">
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button><span>+</span><button class="btn" onclick="toggleColor(this)">o</button><span>+</span><button class="btn" onclick="toggleColor(this)">n</button><span>+</span><button class="btn" onclick="toggleColor(this)">o</button><span>=</span><button class="btn word-btn" onclick="speak('mono')">mono</button><span>üêí</span>
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button><span>+</span><button class="btn" onclick="toggleColor(this)">i</button><span>+</span><button class="btn" onclick="toggleColor(this)">e</button><span>+</span><button class="btn" onclick="toggleColor(this)">l</button><span>=</span><button class="btn word-btn" onclick="speak('miel')">miel</button><span>üçØ</span>
        </div>
        <div class="equation">
            <button class="btn" onclick="toggleColor(this)">M</button><span>+</span><button class="btn" onclick="toggleColor(this)">√∫</button><span>+</span><button class="btn" onclick="toggleColor(this)">s</button><span>+</span><button class="btn" onclick="toggleColor(this)">i</button><span>+</span><button class="btn" onclick="toggleColor(this)">c</button><span>+</span><button class="btn" onclick="toggleColor(this)">a</button><span>=</span><button class="btn word-btn" onclick="speak('m√∫sica')">m√∫sica</button><span>üéµ</span>
        </div>
    </div>

    <!-- Parte 5 -->
    <div id="part5" class="section">
        <div class="match-container">
            <div class="column" id="emoji-column"></div>
            <div class="column" id="word-column"></div>
        </div>
    </div>

    <button class="nav-arrow" onclick="nextSection()" id="nextBtn">‚ûú</button>
</div>

<script>
    let currentPart = 1;
    const totalParts = 5;

    function speak(text) {
        const ut = new SpeechSynthesisUtterance(text);
        ut.lang = 'es-ES';
        window.speechSynthesis.speak(ut);
    }

    function toggleColor(btn) {
        btn.classList.toggle('selected');
    }

    function nextSection() {
        if (currentPart < totalParts) {
            document.getElementById(`part${currentPart}`).classList.remove('active');
            currentPart++;
            document.getElementById(`part${currentPart}`).classList.add('active');
            window.scrollTo(0,0);
        }
        if (currentPart === totalParts) {
            document.getElementById('nextBtn').style.display = 'none';
            initGame();
        }
    }

    const gameData = [
        { word: 'mano', emoji: 'üñêÔ∏è', isImg: false },
        { word: 'mesa', emoji: 'https://i.imgur.com/ipnAsRk.png', isImg: true },
        { word: 'mono', emoji: 'üêí', isImg: false },
        { word: 'miel', emoji: 'üçØ', isImg: false },
        { word: 'm√∫sica', emoji: 'üéµ', isImg: false }
    ];

    let selectedItems = [];

    function initGame() {
        const emojiCol = document.getElementById('emoji-column');
        const wordCol = document.getElementById('word-column');
        emojiCol.innerHTML = '';
        wordCol.innerHTML = '';
        
        const emojis = gameData.map(d => ({ val: d.emoji, id: d.word, type: 'emoji', isImg: d.isImg }));
        const words = gameData.map(d => ({ val: d.word, id: d.word, type: 'word', isImg: false }));

        emojis.sort(() => Math.random() - 0.5);
        words.sort(() => Math.random() - 0.5);

        emojis.forEach(item => {
            const div = document.createElement('div');
            div.className = 'match-item';
            if(item.isImg) {
                div.innerHTML = `<img src="${item.val}" class="emoji-img">`;
            } else {
                div.innerText = item.val;
            }
            div.onclick = () => handleMatch(div, item);
            emojiCol.appendChild(div);
        });

        words.forEach(item => {
            const div = document.createElement('div');
            div.className = 'match-item word';
            div.innerText = item.val;
            div.onclick = () => handleMatch(div, item);
            wordCol.appendChild(div);
        });
    }

    function handleMatch(el, item) {
        if (el.classList.contains('correct') || selectedItems.some(s => s.el === el)) return;

        selectedItems = selectedItems.filter(s => {
            if(s.item.type === item.type) {
                s.el.classList.remove('selected-active');
                return false;
            }
            return true;
        });

        el.classList.add('selected-active');
        selectedItems.push({ el, item });

        if (selectedItems.length === 2) {
            const [first, second] = selectedItems;
            
            if (first.item.id === second.item.id) {
                first.el.classList.remove('selected-active');
                second.el.classList.remove('selected-active');
                first.el.classList.add('correct');
                second.el.classList.add('correct');
                speak(first.item.id);
                selectedItems = [];
            } else {
                first.el.classList.add('incorrect');
                second.el.classList.add('incorrect');
                setTimeout(() => {
                    first.el.classList.remove('incorrect', 'selected-active');
                    second.el.classList.remove('incorrect', 'selected-active');
                    selectedItems = [];
                }, 500);
            }
        }
    }
</script>

</body>
</html>